<div class="container">
  <h1>Authors</h1>
  <%= link_to 'Back to dashboard', dashboard_path %>
  <%= link_to 'New Author', new_author_path %>
  <div class="container">
    <div class="container">
      <%= form_with url: authors_path, method: :get, html: {class: 'mb-4' } do |f| %>
        <%= f.text_field :query,
                          class: "form-control",
                          placeholder: 'Search for an author',
                          value: params[:query]
                          %>
        <%= f.submit "Search", class: "btn btn-flat" %>
        <% end %>
    </div>
  </div>
  <table class="border">
    <thead>
      <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Date of Birth</th>
        <th>About</th>
        <th>Nationality</th>
        <th>Book Count</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @authors.each do |author| %>
        <tr>
          <td><%= author.first_name %></td>
          <td><%= author.last_name %></td>
          <td><%= author.date_of_birth %></td>
          <td><%= author.about %></td>
          <td><%= author.nationality %></td>
          <td><%= author.books.count %></td>
          <td>
            <%= link_to 'Show', author %>
            <%= link_to 'Edit', edit_author_path(author) %>
            <%= button_to 'Delete', author, method: :delete, data: { confirm: 'Are you sure?'} %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
